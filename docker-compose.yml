version: '3'

services:
  pikpak-bot:
    build: .
    container_name: pikpak_bot
    restart: unless-stopped
    
    # 使用 Host 网络模式，网络直通，性能最好且配置最简单
    network_mode: "host"
    
    volumes:
      # 1. TV 监控路径
      # 宿主机路径: /data/downloads/incoming/TV
      # 容器内路径: /data/downloads/incoming/TV (保持一致以便于管理)
      - /data/downloads/incoming/TV:/data/downloads/incoming/TV
      
      # 2. Movie 监控路径
      # 宿主机路径: /data/downloads/incoming/Movie
      # 容器内路径: /data/downloads/incoming/Movie
      - /data/downloads/incoming/Movie:/data/downloads/incoming/Movie
      
      # 3. 归档路径
      # 宿主机路径 -> 容器内路径
      - ./data/processed:/data/processed

    # 从 .env 文件读取环境变量
    env_file:
      - .env